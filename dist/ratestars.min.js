!function(s){"use strict";function t(t,a){this.$input=s(t),this.options=s.extend({},s.ratestars.defaults,a),this.init()}var a=0;s.extend(t.prototype,{init:function(){this.options.maxRate=this.$input.data("maxRate")||this.options.maxRate,this.options.starClass=this.$input.data("starClass")||this.options.starClass,this.options.elClass=this.$input.data("elClass")||this.options.elClass,this.ens=".ratestars"+ ++a,this.starSelector="."+this.options.starClass.split(" ").join("."),this.hasLabels=!!this.options.labels.length,this.$el=this.$input.wrap("<"+this.options.tag+">").parent().addClass(this.options.elClass),this.$el.prepend(this.generateHtml()),this.$stars=this.$el.find(this.starSelector),this.hasLabels&&(this.$label=this.$el.find("."+this.options.labelClass.split(" ").join(".")),this.labelText=this.$label.text());var s=this.$input.val();if(s.length){var t=parseInt(s,10),e=this.$stars.eq(t-1);e.prevAll().addBack().addClass(this.options.starActiveClass),this.hasLabels&&this.$label.text(this.options.labels[t-1])}this.events()},generateHtml:function(){for(var s="",t=1;t<=this.options.maxRate;t++)s+='<a class="'+this.options.starClass+'">'+t+"</a>";return this.hasLabels?s+='<span class="'+this.options.labelClass+'">'+this.options.labels[0]+"</span>":s},events:function(){var t=this;this.options.hoverEvents&&this.$el.on("mouseover"+this.ens,this.starSelector,function(){var a=s(this);t.$el.addClass(t.options.elHoveredClass),a.prevAll().addBack().addClass(t.options.starHoveredClass),t.hasLabels&&t.$label.text(t.options.labels[parseInt(a.text(),10)-1])}).on("mouseout"+this.ens,this.starSelector,function(){t.$el.removeClass(t.options.elHoveredClass),t.$stars.removeClass(t.options.starHoveredClass),t.hasLabels&&t.$label.text(t.labelText)}),this.$el.on("click"+this.ens,this.starSelector,function(){t.setValue(t.$stars.index(s(this))+1)})},setValue:function(s){var t=this.$stars.eq(s-1),a=this;this.$stars.removeClass(this.options.starActiveClass),t.prevAll().addBack().addClass(this.options.starActiveClass),this.$input.val(s).trigger("change"),this.hasLabels&&(this.labelText=this.options.labels[s-1],this.$label.text(this.labelText)),t.addClass(this.options.animateClass),setTimeout(function(){t.removeClass(a.options.animateClass)},a.options.animateDuration),this.options.rateCallback&&this.options.rateCallback(s,this),this.options.rateOnce&&this.$el.off(this.ens)},destroy:function(){this.$el.off(this.ens),this.$input.detach().insertAfter(this.$el),this.$el.remove(),this.$input.data("ratestars",null)}}),s.ratestars=t,s.ratestars.defaults={maxRate:5,tag:"p",elClass:"rateStars",elHoveredClass:"hovered",starClass:"rateStar",starActiveClass:"active",starHoveredClass:"hovered",labelClass:"textLabel",animateClass:"clicked",animateDuration:300,labels:[],hoverEvents:!0,rateOnce:!1,rateCallback:null},s.fn.ratestars=function(a){return this.each(function(){s.data(this,"ratestars")||s.data(this,"ratestars",new t(this,a))})}}(window.jQuery||window.Zepto);